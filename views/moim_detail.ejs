<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ìƒì„¸í˜ì´ì§€</title>
  </head>
  <link rel="stylesheet" href="/static/moim_detail.css" type="text/css" />
  <script
    src="https://code.jquery.com/jquery-3.7.1.min.js"
    integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
    crossorigin="anonymous"
  ></script>
  <script src="/static/moim_list.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

  <body>
    <header>
      <div id="moim_id" style="display: none"><%=moim.moim_id %></div>
      <% let count = 0; %>
      <div class="logo">
        <!-- ë¡œê³  -->
        <a href="/">MOiM</a>
      </div>
      <div class="setting">
        <div><span>Ã—</span></div>
      </div>
    </header>
    <section>
      <div class="moim">
        <img src="<%=moim.represent_img %>" alt="" /><br />
        <h3>ëª¨ì„ ì œëª© : <%=moim.title %></h3>
        <!-- <div class="moim_info">
        <div class="element">
            <div>ì¥ì†Œ</div>
            <div>ì¼ì‹œ</div>
            <div>ëª¨ì§‘ ê¸°ê°„</div>
            <div>ì¸ì›</div>
        </div>
        <div class="content">
            <div>ì¸ì²œê´‘ì—­ì‹œ</div>
            <div>2024.11.15</div>
          <div>2024.11.01 ~ 2024.11.10</div>
          <div>3/10</div>
        </div>
      </div> -->
        <table>
          <tbody>
            <tr>
              <td id="col1">ì¹´í…Œê³ ë¦¬</td>
              <td id="col2"><%=moim.category %></td>
            </tr>
            <tr>
              <td id="col1">ì¥ì†Œ</td>
              <td id="col2"><%=moim.location %></td>
            </tr>
            <tr>
              <td id="col1">ì˜¨ë¼ì¸ ì—¬ë¶€</td>
              <td id="col2">
                <% if (moim.on_line == true) { %> ì˜¨ë¼ì¸ <% } %> <% if
                (moim.on_line == false) { %> ì˜¤í”„ë¼ì¸ <% } %>
              </td>
            </tr>

            <tr>
              <td id="col1">ì¼ì‹œ</td>
              <td id="col2"><%=moim.even_date %></td>
            </tr>
            <tr>
              <td id="col1">ëª¨ì§‘ ê¸°ê°„</td>
              <td id="col2"><%= moim.expiration_date %></td>
            </tr>
            <tr name="moimcount">
              <td id="col1">ëª¨ì§‘ ì¸ì›</td>
              <td id="col2">
                <span>
                  <% for( let j = 0; j < moimcount.length; j++ ) { %> <% if
                  (moimcount[j].moim_id == moim.moim_id) { %> <% count =
                  moimcount[j].moim_count %> <% } %> <% } %> <%= count
                  %>/<%=moim.max_people %></span
                ><button type="button" onclick="showPPL()">ğŸ‘¥</button>
              </td>
            </tr>
            <tr>
              <!-- ì°¸ì—¬í•˜ëŠ” ê²½ìš° detail ì •ë³´ ì¶”ê°€ -->
            </tr>
          </tbody>
        </table>
        <br />
        <br />
        <br />
        <br />
      </div>
      <button class="apply" onclick="moimSet()">ì°¸ì—¬í•˜ê¸°</button>
    </section>
    <script>
      async function moimSet() {
        const moim_id = document.getElementById("moim_id");
        console.log(moim_id.textContent);
        const { data } = await axios({
          method: "POST",
          url: "/moim/moimset",
          data: {
            moim_id: moim_id.textContent,
          },
        });

        if (data.result == true) {
          alert("ê°€ì… ì„±ê³µ");
          window.location.reload();
        } else {
          alert("ê°€ì… ì‹¤íŒ¨");
        }
      }
    </script>
  </body>
</html>
